<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>conjur API documentation</title>
    <meta name="description" content="" />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  } 

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; } 

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;
      
      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>


  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">
    <li class="set"><h3><a href="#header-variables">Module variables</a></h3>
      
  <ul>
    <li class="mono"><a href="#conjur.config">config</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-functions">Functions</a></h3>
      
  <ul>
    <li class="mono"><a href="#conjur.configure">configure</a></li>
    <li class="mono"><a href="#conjur.new_from_key">new_from_key</a></li>
    <li class="mono"><a href="#conjur.new_from_netrc">new_from_netrc</a></li>
    <li class="mono"><a href="#conjur.new_from_token">new_from_token</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#conjur.API">API</a></span>
        
          
  <ul>
    <li class="mono"><a href="#conjur.API.__init__">__init__</a></li>
    <li class="mono"><a href="#conjur.API.add_public_key">add_public_key</a></li>
    <li class="mono"><a href="#conjur.API.auth_header">auth_header</a></li>
    <li class="mono"><a href="#conjur.API.authenticate">authenticate</a></li>
    <li class="mono"><a href="#conjur.API.create_group">create_group</a></li>
    <li class="mono"><a href="#conjur.API.create_host">create_host</a></li>
    <li class="mono"><a href="#conjur.API.create_user">create_user</a></li>
    <li class="mono"><a href="#conjur.API.create_variable">create_variable</a></li>
    <li class="mono"><a href="#conjur.API.delete">delete</a></li>
    <li class="mono"><a href="#conjur.API.get">get</a></li>
    <li class="mono"><a href="#conjur.API.group">group</a></li>
    <li class="mono"><a href="#conjur.API.host">host</a></li>
    <li class="mono"><a href="#conjur.API.layer">layer</a></li>
    <li class="mono"><a href="#conjur.API.post">post</a></li>
    <li class="mono"><a href="#conjur.API.public_key">public_key</a></li>
    <li class="mono"><a href="#conjur.API.public_key_names">public_key_names</a></li>
    <li class="mono"><a href="#conjur.API.public_keys">public_keys</a></li>
    <li class="mono"><a href="#conjur.API.put">put</a></li>
    <li class="mono"><a href="#conjur.API.remove_public_key">remove_public_key</a></li>
    <li class="mono"><a href="#conjur.API.remove_public_keys">remove_public_keys</a></li>
    <li class="mono"><a href="#conjur.API.request">request</a></li>
    <li class="mono"><a href="#conjur.API.resource">resource</a></li>
    <li class="mono"><a href="#conjur.API.role">role</a></li>
    <li class="mono"><a href="#conjur.API.user">user</a></li>
    <li class="mono"><a href="#conjur.API.variable">variable</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#conjur.Config">Config</a></span>
        
          
  <ul>
    <li class="mono"><a href="#conjur.Config.__init__">__init__</a></li>
    <li class="mono"><a href="#conjur.Config.get">get</a></li>
    <li class="mono"><a href="#conjur.Config.load">load</a></li>
    <li class="mono"><a href="#conjur.Config.service_url">service_url</a></li>
    <li class="mono"><a href="#conjur.Config.set">set</a></li>
    <li class="mono"><a href="#conjur.Config.update">update</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#conjur.ConjurException">ConjurException</a></span>
        
        </li>
        <li class="mono">
        <span class="class_name"><a href="#conjur.Group">Group</a></span>
        
          
  <ul>
    <li class="mono"><a href="#conjur.Group.__init__">__init__</a></li>
    <li class="mono"><a href="#conjur.Group.add_member">add_member</a></li>
    <li class="mono"><a href="#conjur.Group.members">members</a></li>
    <li class="mono"><a href="#conjur.Group.remove_member">remove_member</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#conjur.Host">Host</a></span>
        
          
  <ul>
    <li class="mono"><a href="#conjur.Host.__init__">__init__</a></li>
    <li class="mono"><a href="#conjur.Host.exists">exists</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#conjur.Layer">Layer</a></span>
        
          
  <ul>
    <li class="mono"><a href="#conjur.Layer.__init__">__init__</a></li>
    <li class="mono"><a href="#conjur.Layer.add_host">add_host</a></li>
    <li class="mono"><a href="#conjur.Layer.exists">exists</a></li>
    <li class="mono"><a href="#conjur.Layer.remove_host">remove_host</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#conjur.Resource">Resource</a></span>
        
          
  <ul>
    <li class="mono"><a href="#conjur.Resource.__init__">__init__</a></li>
    <li class="mono"><a href="#conjur.Resource.deny">deny</a></li>
    <li class="mono"><a href="#conjur.Resource.permit">permit</a></li>
    <li class="mono"><a href="#conjur.Resource.permitted">permitted</a></li>
    <li class="mono"><a href="#conjur.Resource.url">url</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#conjur.Role">Role</a></span>
        
          
  <ul>
    <li class="mono"><a href="#conjur.Role.__init__">__init__</a></li>
    <li class="mono"><a href="#conjur.Role.from_roleid">from_roleid</a></li>
    <li class="mono"><a href="#conjur.Role.grant_to">grant_to</a></li>
    <li class="mono"><a href="#conjur.Role.is_permitted">is_permitted</a></li>
    <li class="mono"><a href="#conjur.Role.members">members</a></li>
    <li class="mono"><a href="#conjur.Role.revoke_from">revoke_from</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#conjur.User">User</a></span>
        
          
  <ul>
    <li class="mono"><a href="#conjur.User.__init__">__init__</a></li>
    <li class="mono"><a href="#conjur.User.exists">exists</a></li>
    <li class="mono"><a href="#conjur.User.url">url</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#conjur.Variable">Variable</a></span>
        
          
  <ul>
    <li class="mono"><a href="#conjur.Variable.__init__">__init__</a></li>
    <li class="mono"><a href="#conjur.Variable.add_value">add_value</a></li>
    <li class="mono"><a href="#conjur.Variable.value">value</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">conjur</span> module</h1>
  
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur', this);">Show source &equiv;</a></p>
  <div id="source-conjur" class="source">
    <pre><code>#
# Copyright (C) 2014 Conjur Inc
#
# Permission is hereby granted, free of charge, to any person obtaining a copy of
# this software and associated documentation files (the "Software"), to deal in
# the Software without restriction, including without limitation the rights to
# use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
# the Software, and to permit persons to whom the Software is furnished to do so,
# subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in all
# copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
# FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
# COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
# IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
# CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
import os

from config import Config
from api import API
from group import Group
from user import User
from host import Host
from layer import Layer
from resource import Resource
from role import Role
from variable import Variable
from exceptions import ConjurException

from config import config

def _config(given):
    if given is None:
        env_config_file = os.getenv('CONJURRC')
        if env_config_file is not None:
            config.load(env_config_file)
        return config
    return given


def configure(**kwargs):
    """
    Convenience function to merge multiple settings into the default global
    config.

    Example:

        >>> import conjur
        >>> conjur.configure(appliance_url='https://conjur.example.com/api',
        ...              account='example',
        ...              cert_path='/path/to/cert.pem')

    """
    config.update(**kwargs)
    return config


def new_from_netrc(netrc_file=None, configuration=None):
    """
    Create a `conjur.API` instance using an identity loaded from netrc.  This method
    uses the identity stored for the host `config.authn_url`.

    `netrc_file` is an alternative path to the netrc formatted file.  Defaults
    to ~/.netrc on unixy systems.

    `configuration` is a `conjur.Config` instance used to determine the host
    in the netrc file, and also passed to the `conjur.new_from_key` method to
    create the API instance using the identity.
    """
    import netrc

    configuration = _config(configuration)
    auth = netrc.netrc(netrc_file).authenticators(configuration.authn_url)
    if auth is None:
        raise ValueError("No authenticators found for authn_url '%s' in %s" % (
            configuration.authn_url,
            (netrc_file or '~/.netrc')
        ))
    login, _, api_key = auth
    return new_from_key(login, api_key, configuration)


def new_from_key(login, api_key, configuration=None):
    """
    Create a `conjur.API` instance that will authenticate on demand as the identity given
    by `login` and `api_key`.

    `login` is the identity of the Conjur user or host to authenticate as.

    `api_key` is the api key *or* password to use when authenticating.

    `configuration` is a `conjur.Config` instance for the api.  If not given the global
        `Config` instance (`conjur.config`) will be used.
    """

    return API(credentials=(login, api_key), config=_config(configuration))


def new_from_token(token, configuration=None):
    """
    Create a `conjur.API` instance that will authenticate using the given signed Conjur
    token.

    This is useful if you want to act on behalf of a the identity of an
    HTTP request containing a user's signed token.

    `token` is the json formatted, *not* base64'd, Conjur authentication Token.

    `configuration` is a conjur.Config instance for the api.  If not given, the global Config
    instance (`conjur.config`) will be used.
    """
    return API(token=token, config=_config(configuration))

__all__ = (
    'config', 'Config', 'Group', 'API', 'User', 'Host', 'Layer', 'Resource', 'Role', 'Variable',
    'new_from_key', 'new_from_netrc', 'new_from_token', 'configure', 'ConjurException'
)
</code></pre>
  </div>

  </header>

  <section id="section-items">
    <h2 class="section-title" id="header-variables">Module variables</h2>
      <div class="item">
      <p id="conjur.config" class="name">var <span class="ident">config</span></p>
      
  
  <div class="source_cont">
</div>

      </div>

    <h2 class="section-title" id="header-functions">Functions</h2>
      
  <div class="item">
    <div class="name def" id="conjur.configure">
    <p>def <span class="ident">configure</span>(</p><p>**kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Convenience function to merge multiple settings into the default global
config.</p>
<p>Example:</p>
<pre><code>&gt;&gt;&gt; import conjur
&gt;&gt;&gt; conjur.configure(appliance_url='https://conjur.example.com/api',
...              account='example',
...              cert_path='/path/to/cert.pem')
</code></pre></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.configure', this);">Show source &equiv;</a></p>
  <div id="source-conjur.configure" class="source">
    <pre><code>def configure(**kwargs):
    """
    Convenience function to merge multiple settings into the default global
    config.

    Example:

        >>> import conjur
        >>> conjur.configure(appliance_url='https://conjur.example.com/api',
        ...              account='example',
        ...              cert_path='/path/to/cert.pem')

    """
    config.update(**kwargs)
    return config
</code></pre>
  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="conjur.new_from_key">
    <p>def <span class="ident">new_from_key</span>(</p><p>login, api_key, configuration=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a <a href="#conjur.API"><code>API</code></a> instance that will authenticate on demand as the identity given
by <code>login</code> and <code>api_key</code>.</p>
<p><code>login</code> is the identity of the Conjur user or host to authenticate as.</p>
<p><code>api_key</code> is the api key <em>or</em> password to use when authenticating.</p>
<p><code>configuration</code> is a <a href="#conjur.Config"><code>Config</code></a> instance for the api.  If not given the global
    <code>Config</code> instance (<a href="#conjur.config"><code>config</code></a>) will be used.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.new_from_key', this);">Show source &equiv;</a></p>
  <div id="source-conjur.new_from_key" class="source">
    <pre><code>def new_from_key(login, api_key, configuration=None):
    """
    Create a `conjur.API` instance that will authenticate on demand as the identity given
    by `login` and `api_key`.

    `login` is the identity of the Conjur user or host to authenticate as.

    `api_key` is the api key *or* password to use when authenticating.

    `configuration` is a `conjur.Config` instance for the api.  If not given the global
        `Config` instance (`conjur.config`) will be used.
    """

    return API(credentials=(login, api_key), config=_config(configuration))
</code></pre>
  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="conjur.new_from_netrc">
    <p>def <span class="ident">new_from_netrc</span>(</p><p>netrc_file=None, configuration=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a <a href="#conjur.API"><code>API</code></a> instance using an identity loaded from netrc.  This method
uses the identity stored for the host <a href="/config.authn_url.ext"><code>config.authn_url</code></a>.</p>
<p><code>netrc_file</code> is an alternative path to the netrc formatted file.  Defaults
to ~/.netrc on unixy systems.</p>
<p><code>configuration</code> is a <a href="#conjur.Config"><code>Config</code></a> instance used to determine the host
in the netrc file, and also passed to the <a href="#conjur.new_from_key"><code>new_from_key</code></a> method to
create the API instance using the identity.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.new_from_netrc', this);">Show source &equiv;</a></p>
  <div id="source-conjur.new_from_netrc" class="source">
    <pre><code>def new_from_netrc(netrc_file=None, configuration=None):
    """
    Create a `conjur.API` instance using an identity loaded from netrc.  This method
    uses the identity stored for the host `config.authn_url`.

    `netrc_file` is an alternative path to the netrc formatted file.  Defaults
    to ~/.netrc on unixy systems.

    `configuration` is a `conjur.Config` instance used to determine the host
    in the netrc file, and also passed to the `conjur.new_from_key` method to
    create the API instance using the identity.
    """
    import netrc

    configuration = _config(configuration)
    auth = netrc.netrc(netrc_file).authenticators(configuration.authn_url)
    if auth is None:
        raise ValueError("No authenticators found for authn_url '%s' in %s" % (
            configuration.authn_url,
            (netrc_file or '~/.netrc')
        ))
    login, _, api_key = auth
    return new_from_key(login, api_key, configuration)
</code></pre>
  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="conjur.new_from_token">
    <p>def <span class="ident">new_from_token</span>(</p><p>token, configuration=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a <a href="#conjur.API"><code>API</code></a> instance that will authenticate using the given signed Conjur
token.</p>
<p>This is useful if you want to act on behalf of a the identity of an
HTTP request containing a user's signed token.</p>
<p><code>token</code> is the json formatted, <em>not</em> base64'd, Conjur authentication Token.</p>
<p><code>configuration</code> is a conjur.Config instance for the api.  If not given, the global Config
instance (<a href="#conjur.config"><code>config</code></a>) will be used.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.new_from_token', this);">Show source &equiv;</a></p>
  <div id="source-conjur.new_from_token" class="source">
    <pre><code>def new_from_token(token, configuration=None):
    """
    Create a `conjur.API` instance that will authenticate using the given signed Conjur
    token.

    This is useful if you want to act on behalf of a the identity of an
    HTTP request containing a user's signed token.

    `token` is the json formatted, *not* base64'd, Conjur authentication Token.

    `configuration` is a conjur.Config instance for the api.  If not given, the global Config
    instance (`conjur.config`) will be used.
    """
    return API(token=token, config=_config(configuration))
</code></pre>
  </div>
</div>

  </div>
  

    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="conjur.API" class="name">class <span class="ident">API</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API" class="source">
    <pre><code>class API(object):
    def __init__(self, credentials=None, token=None, config=None):
        """
        Creates an API instance configured with the given credentials or token
        and config.

        Generally you should use `conjur.new_from_key`, `conjur.new_from_netrc`,
        or `conjur.new_from_token` to get an API instance instead of calling
        this constructor directly.

        `credentials` should be a `(login,api_key)` tuple if present.

        `token` should be a string containing a Conjur JSON token to use when authenticating.

        `config` should be a `conjur.Config` instance, and defaults to `conjur.config`.
        """
        if credentials:
            self.login, self.api_key = credentials
            self.token = None
        elif token:
            self.token = token
            self.login = self.api_key = None
        else:
            raise TypeError("must be given a credentials or token argument")
        if config:
            self.config = config
        else:
            from conjur.config import config as default_config

            self.config = default_config

    def authenticate(self, cached=True):
        """
        Authenticate with Conjur and return a token (str) that can be used
        to establish identity to Conjur services.

        Returns the json formatted signed Conjur authentication Token.

        It is an error to call this method if the API was created with a token
        rather than a login and api key.

        When `cached` is True, a cached token value will be used if it is
        available, otherwise the token will be fetched whether or not a
        cached value is present.
        """
        if cached and self.token:
            return self.token

        if not self.login or not self.api_key:
            raise ConjurException(
                "API created without credentials can't authenticate")

        url = "%s/users/%s/authenticate" % (self.config.authn_url,
                                            urlescape(self.login))

        self.token = self._request('post', url, self.api_key).text
        return self.token

    def auth_header(self):
        """
        Get the value of an Authorization header to make Conjur requests,
        performing authentication if necessary.

        Returns a string suitable for use as an `Authorization` header value.
        """
        token = self.authenticate()
        enc = base64.b64encode(token)
        return 'Token token="%s"' % enc

    def request(self, method, url, **kwargs):
        """
        Make an authenticated request with the given method and url.
        Additional arguments are passed to requests.<method>.

        Returns a `requests.Response` object.

        If the response status is not 2xx, raises a `conjur.ConjurException`.

        `method` is of the standard HTTP verbs (case insensitive).

        `url` is the full url to request.

        If `kwargs['check_errors']` is `True`, non-2xx responses will raise a `conjur.ConjurException`.
        Otherwise, it is the callers responsibility to check the status of the returned `requests.Response`.

        Additional are passed through to the requests.<method> call after adding an `Authorization`
        header and HTTPS verification settings.
        """
        headers = kwargs.setdefault('headers', {})
        headers['Authorization'] = self.auth_header()

        return self._request(method, url, **kwargs)

    def _request(self, method, url, *args, **kwargs):
        if 'verify' not in kwargs:
            kwargs['verify'] = self.config.verify
        check_errors = kwargs.pop('check_errors', True)

        response = getattr(requests, method.lower())(url, *args, **kwargs)
        if check_errors and response.status_code >= 300:
            raise ConjurException("Request failed: %d" % response.status_code)

        return response

    def get(self, url, **kwargs):
        """
        **NOTE** You will generally not need to use this method directly.

        Makes an authenticated GET request to the given :url:.

        Returns a requests.Response object.

        If the response status is not 2xx, raises a ConjurException.

        `url` is the full url to request.
         Keyword arguments are passed through to `requests.get`.
        """
        return self.request('get', url, **kwargs)

    def post(self, url, **kwargs):
        """
        **NOTE** You will generally not need to use this method directly.

        Makes an authenticated `POST` request to the given `url`

        Returns a `requests.Response` object.

        If the response status is not 2xx, raises a `conjur.ConjurException`.

        `url` is the full url to request.
         Keyword arguments are passed through to `requests.post`.
        """
        return self.request('post', url, **kwargs)

    def put(self,url, **kwargs):
        """
        **NOTE** You will generally not need to use this method directly.

        Makes an authenticated `PUT` request to the given `url`

        Returns a `requests.Response` object.

        If the response status is not 2xx, raises a `conjur.ConjurException`.

        `url` is the full url to request.
         Keyword arguments are passed through to `requests.put`.
        """
        return self.request('put', url, **kwargs)

    def delete(self, url, **kwargs):
        """
        **NOTE** You will generally not need to use this method directly.

        Makes an authenticated `DELETE` request to the given `url`

        Returns a `requests.Response` object.

        If the response status is not 2xx, raises a `conjur.ConjurException`.

        `url` is the full url to request.
         Keyword arguments are passed through to `requests.delete`.
        """
        return self.request('delete', url, **kwargs)

    def role(self, kind, identifier):
        """
        Return a `conjur.Role` object with the given kind and id.

        This method neither creates nor checks for the roles's existence.

        `kind` should be the role kind - for example, `"group"`, `"user"`,
        or `"host"`.

        `identifier` should be the *unqualified* Conjur id.  For example, to
        get the role for a user named bub, you would call `api.role('user', 'bub')`.
        """
        return Role(self, kind, identifier)

    def resource(self, kind, identifier):
        """
        Return a `conjur.Resource` object with the given kind and id.

        This method neither creates nor checks for the resource's existence.

        `kind` should be the resource kind - for example, `"variable"`, `"webservice"`,
        or `"configuration"`.

        `identifier` should be the *unqualified* Conjur id.  For example, to
        get the resource for a user variable named db_password, you would call
        `api.resource('variable', 'db_password')`.
        """
        return Resource(self, kind, identifier)

    def group(self, id):
        """
        Return a `conjur.Group` object with the given id.

        This method neither creates nor checks for the groups's existence.

        `id` is the *unqualified* id of the group, and does not include the account or kind.
        """
        return Group(self, id)

    def create_group(self, id):
        """
        Creates a Conjur Group and returns a `conjur.Group` object representing it.

        `id` is the identifier of the group to create.
        """

        self.post('{0}/groups'.format(self.config.core_url), data={'id': id})
        return Group(self, id)

    def variable(self, id):
        """
        Return a `conjur.Variable` object with the given `id`.

        This method neither creates nor checks for the variable's existence.
        """
        return Variable(self, id)

    def create_variable(self, id=None, mime_type='text/plain', kind='secret',
                        value=None):
        """
        Creates a Conjur variable.

        Returns a `conjur.Variable` object.

        `id` is an identifier for the new variable.  If not given, a unique id will
        be generated.

        `mime_type` is a string like `text/plain` indicating the content type stored by the
        variable.  This determines the Content-Type header of responses returning the variable's value.

        `kind`  is a string indicating a user defined role for the variable.
        Ignored by Conjur, but useful for making a variable's
        purpose.

        `value` is a string assigning an initial value for the variable.
        """
        data = {'mime_type': mime_type, 'kind': kind}
        if id is not None:
            data['id'] = id
        if value is not None:
            data['value'] = value

        attrs = self.post("%s/variables" % self.config.core_url, data=data).json()
        id = id or attrs['id']
        return Variable(self, id, attrs)

    def layer(self, layer_id):
        """
        Return a `conjur.Layer` object with the given `layer_id`.

        This method neither creates nor checks for the layer's existence.
        """
        return Layer(self, layer_id)

    def host(self, host_id):
        """
        Return a `conjur.Host` object with the given `host_id`.

        This method neither creates nor checks for the host's existence.
        """
        return Host(self, host_id)

    def create_host(self, host_id):
        """
        Creates a Conjur Host and returns a `conjur.Host` object that represents it.

        `host_id` is the id of the Host to be created.  The `conjur.Host` object returned by
        this method will have an `api_key` attribute, but when the Host is fetched in the future this attribute
        is not available.
        """
        attrs = self.post("{0}/hosts".format(self.config.core_url),
                          data={'id': host_id}).json()
        return Host(self, host_id, attrs)

    def user(self, login):
        """
        Returns an object representing a Conjur user with the given login.

        The user is *not* created by this method, and may in fact not exist.
        """
        return User(self, login)

    def create_user(self, login, password=None):
        """
        Create a Conjur user with the given `login` and password, and returns a `conjur.User` object
        representing it.

        If `password` is not given, the user will only be able to authenticate using the generated api_key
        attribute of the returned User instance.  Note that this `api_key` will not be available when the User
        is fetched in the future.
        """
        data = {'login': login}
        if password is not None:
            data['password'] = password
        url = "{0}/users".format(self.config.core_url)
        return User(self, login, self.post(url, data=data).json())

    def _public_key_url(self, *args):
        return '/'.join([self.config.pubkeys_url] +
                        [urlescape(arg) for arg in args])

    def add_public_key(self, username, key):
        """
        Upload an openssh formatted public key to be made available for the user
        given by `username`.

        The key should be formatted like `ssh-rsa <data...> bob@example.com`.
        """
        self.post(self._public_key_url(username), data=key)

    def remove_public_key(self, username, keyname):
        """
        Remove a specific public key for the user identified by `username`.
        The `keyname` argument refers to the name field in the openssh formatted key
        to be deleted.

        For example, if they key contents are `ssh-rsa <data...> bob@example.com`,
        the `keyname` should be `bob@example.com`
        """
        self.delete(self._public_key_url(username, keyname))

    def remove_public_keys(self, username):
        """
        Remove all public keys for the user represented by `username`.
        """
        for keyname in self.public_key_names(username):
            self.remove_public_key(username, keyname)

    def public_keys(self, username):
        """
        Returns all keys for the user given by `username`, as a newline delimited string.

        The odd format is chosen to support the Conjur SSH login implementation.
        """
        return self.get(self._public_key_url(username)).text

    def public_key(self, username, keyname):
        """
        Return the contents of a specific public key given by `keyname`,
        for the user given by `username` as a string.

        The name of the key is based on the name entry of the openssh formatted key that was uploaded.

        For example, if they key contents are `ssh-rsa <data...> bob@example.com`,
        the `keyname` should be `bob@example.com`
        """
        return self.get(self._public_key_url(username, keyname)).text

    def public_key_names(self, username):
        """
        Return the names of public keys for the user given by `username`.

        The names of the keys are based on the name entry of the openssh formatted key that was uploaded.

        For example, if they key contents are `ssh-rsa <data...> bob@example.com`,
        the `keyname` should be `bob@example.com`
        """
        return [k.split(' ')[-1] for k in self.public_keys(username).split('\n')]
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#conjur.API">API</a></li>
          <li><a href="/__builtin__.object.ext">__builtin__.object</a></li>
          </ul>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="conjur.API.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, credentials=None, token=None, config=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates an API instance configured with the given credentials or token
and config.</p>
<p>Generally you should use <a href="#conjur.new_from_key"><code>new_from_key</code></a>, <a href="#conjur.new_from_netrc"><code>new_from_netrc</code></a>,
or <a href="#conjur.new_from_token"><code>new_from_token</code></a> to get an API instance instead of calling
this constructor directly.</p>
<p><code>credentials</code> should be a <code>(login,api_key)</code> tuple if present.</p>
<p><code>token</code> should be a string containing a Conjur JSON token to use when authenticating.</p>
<p><code>config</code> should be a <a href="#conjur.Config"><code>Config</code></a> instance, and defaults to <a href="#conjur.config"><code>config</code></a>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.__init__', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.__init__" class="source">
    <pre><code>def __init__(self, credentials=None, token=None, config=None):
    """
    Creates an API instance configured with the given credentials or token
    and config.
    Generally you should use `conjur.new_from_key`, `conjur.new_from_netrc`,
    or `conjur.new_from_token` to get an API instance instead of calling
    this constructor directly.
    `credentials` should be a `(login,api_key)` tuple if present.
    `token` should be a string containing a Conjur JSON token to use when authenticating.
    `config` should be a `conjur.Config` instance, and defaults to `conjur.config`.
    """
    if credentials:
        self.login, self.api_key = credentials
        self.token = None
    elif token:
        self.token = token
        self.login = self.api_key = None
    else:
        raise TypeError("must be given a credentials or token argument")
    if config:
        self.config = config
    else:
        from conjur.config import config as default_config
        self.config = default_config
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.add_public_key">
    <p>def <span class="ident">add_public_key</span>(</p><p>self, username, key)</p>
    </div>
    

    
  
    <div class="desc"><p>Upload an openssh formatted public key to be made available for the user
given by <code>username</code>.</p>
<p>The key should be formatted like <code>ssh-rsa &lt;data...&gt; bob@example.com</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.add_public_key', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.add_public_key" class="source">
    <pre><code>def add_public_key(self, username, key):
    """
    Upload an openssh formatted public key to be made available for the user
    given by `username`.
    The key should be formatted like `ssh-rsa <data...> bob@example.com`.
    """
    self.post(self._public_key_url(username), data=key)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.auth_header">
    <p>def <span class="ident">auth_header</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the value of an Authorization header to make Conjur requests,
performing authentication if necessary.</p>
<p>Returns a string suitable for use as an <code>Authorization</code> header value.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.auth_header', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.auth_header" class="source">
    <pre><code>def auth_header(self):
    """
    Get the value of an Authorization header to make Conjur requests,
    performing authentication if necessary.
    Returns a string suitable for use as an `Authorization` header value.
    """
    token = self.authenticate()
    enc = base64.b64encode(token)
    return 'Token token="%s"' % enc
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.authenticate">
    <p>def <span class="ident">authenticate</span>(</p><p>self, cached=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Authenticate with Conjur and return a token (str) that can be used
to establish identity to Conjur services.</p>
<p>Returns the json formatted signed Conjur authentication Token.</p>
<p>It is an error to call this method if the API was created with a token
rather than a login and api key.</p>
<p>When <code>cached</code> is True, a cached token value will be used if it is
available, otherwise the token will be fetched whether or not a
cached value is present.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.authenticate', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.authenticate" class="source">
    <pre><code>def authenticate(self, cached=True):
    """
    Authenticate with Conjur and return a token (str) that can be used
    to establish identity to Conjur services.
    Returns the json formatted signed Conjur authentication Token.
    It is an error to call this method if the API was created with a token
    rather than a login and api key.
    When `cached` is True, a cached token value will be used if it is
    available, otherwise the token will be fetched whether or not a
    cached value is present.
    """
    if cached and self.token:
        return self.token
    if not self.login or not self.api_key:
        raise ConjurException(
            "API created without credentials can't authenticate")
    url = "%s/users/%s/authenticate" % (self.config.authn_url,
                                        urlescape(self.login))
    self.token = self._request('post', url, self.api_key).text
    return self.token
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.create_group">
    <p>def <span class="ident">create_group</span>(</p><p>self, id)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a Conjur Group and returns a <a href="#conjur.Group"><code>Group</code></a> object representing it.</p>
<p><code>id</code> is the identifier of the group to create.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.create_group', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.create_group" class="source">
    <pre><code>def create_group(self, id):
    """
    Creates a Conjur Group and returns a `conjur.Group` object representing it.
    `id` is the identifier of the group to create.
    """
    self.post('{0}/groups'.format(self.config.core_url), data={'id': id})
    return Group(self, id)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.create_host">
    <p>def <span class="ident">create_host</span>(</p><p>self, host_id)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a Conjur Host and returns a <a href="#conjur.Host"><code>Host</code></a> object that represents it.</p>
<p><code>host_id</code> is the id of the Host to be created.  The <a href="#conjur.Host"><code>Host</code></a> object returned by
this method will have an <code>api_key</code> attribute, but when the Host is fetched in the future this attribute
is not available.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.create_host', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.create_host" class="source">
    <pre><code>def create_host(self, host_id):
    """
    Creates a Conjur Host and returns a `conjur.Host` object that represents it.
    `host_id` is the id of the Host to be created.  The `conjur.Host` object returned by
    this method will have an `api_key` attribute, but when the Host is fetched in the future this attribute
    is not available.
    """
    attrs = self.post("{0}/hosts".format(self.config.core_url),
                      data={'id': host_id}).json()
    return Host(self, host_id, attrs)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.create_user">
    <p>def <span class="ident">create_user</span>(</p><p>self, login, password=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a Conjur user with the given <code>login</code> and password, and returns a <a href="#conjur.User"><code>User</code></a> object
representing it.</p>
<p>If <code>password</code> is not given, the user will only be able to authenticate using the generated api_key
attribute of the returned User instance.  Note that this <code>api_key</code> will not be available when the User
is fetched in the future.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.create_user', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.create_user" class="source">
    <pre><code>def create_user(self, login, password=None):
    """
    Create a Conjur user with the given `login` and password, and returns a `conjur.User` object
    representing it.
    If `password` is not given, the user will only be able to authenticate using the generated api_key
    attribute of the returned User instance.  Note that this `api_key` will not be available when the User
    is fetched in the future.
    """
    data = {'login': login}
    if password is not None:
        data['password'] = password
    url = "{0}/users".format(self.config.core_url)
    return User(self, login, self.post(url, data=data).json())
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.create_variable">
    <p>def <span class="ident">create_variable</span>(</p><p>self, id=None, mime_type=&#39;text/plain&#39;, kind=&#39;secret&#39;, value=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a Conjur variable.</p>
<p>Returns a <a href="#conjur.Variable"><code>Variable</code></a> object.</p>
<p><code>id</code> is an identifier for the new variable.  If not given, a unique id will
be generated.</p>
<p><code>mime_type</code> is a string like <code>text/plain</code> indicating the content type stored by the
variable.  This determines the Content-Type header of responses returning the variable's value.</p>
<p><code>kind</code>  is a string indicating a user defined role for the variable.
Ignored by Conjur, but useful for making a variable's
purpose.</p>
<p><code>value</code> is a string assigning an initial value for the variable.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.create_variable', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.create_variable" class="source">
    <pre><code>def create_variable(self, id=None, mime_type='text/plain', kind='secret',
                    value=None):
    """
    Creates a Conjur variable.
    Returns a `conjur.Variable` object.
    `id` is an identifier for the new variable.  If not given, a unique id will
    be generated.
    `mime_type` is a string like `text/plain` indicating the content type stored by the
    variable.  This determines the Content-Type header of responses returning the variable's value.
    `kind`  is a string indicating a user defined role for the variable.
    Ignored by Conjur, but useful for making a variable's
    purpose.
    `value` is a string assigning an initial value for the variable.
    """
    data = {'mime_type': mime_type, 'kind': kind}
    if id is not None:
        data['id'] = id
    if value is not None:
        data['value'] = value
    attrs = self.post("%s/variables" % self.config.core_url, data=data).json()
    id = id or attrs['id']
    return Variable(self, id, attrs)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.delete">
    <p>def <span class="ident">delete</span>(</p><p>self, url, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p><strong>NOTE</strong> You will generally not need to use this method directly.</p>
<p>Makes an authenticated <code>DELETE</code> request to the given <code>url</code></p>
<p>Returns a <a href="/requests.Response.ext"><code>requests.Response</code></a> object.</p>
<p>If the response status is not 2xx, raises a <a href="#conjur.ConjurException"><code>ConjurException</code></a>.</p>
<p><code>url</code> is the full url to request.
 Keyword arguments are passed through to <a href="/requests.delete.ext"><code>requests.delete</code></a>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.delete', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.delete" class="source">
    <pre><code>def delete(self, url, **kwargs):
    """
    **NOTE** You will generally not need to use this method directly.
    Makes an authenticated `DELETE` request to the given `url`
    Returns a `requests.Response` object.
    If the response status is not 2xx, raises a `conjur.ConjurException`.
    `url` is the full url to request.
     Keyword arguments are passed through to `requests.delete`.
    """
    return self.request('delete', url, **kwargs)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.get">
    <p>def <span class="ident">get</span>(</p><p>self, url, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p><strong>NOTE</strong> You will generally not need to use this method directly.</p>
<p>Makes an authenticated GET request to the given :url:.</p>
<p>Returns a requests.Response object.</p>
<p>If the response status is not 2xx, raises a ConjurException.</p>
<p><code>url</code> is the full url to request.
 Keyword arguments are passed through to <a href="/requests.get.ext"><code>requests.get</code></a>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.get', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.get" class="source">
    <pre><code>def get(self, url, **kwargs):
    """
    **NOTE** You will generally not need to use this method directly.
    Makes an authenticated GET request to the given :url:.
    Returns a requests.Response object.
    If the response status is not 2xx, raises a ConjurException.
    `url` is the full url to request.
     Keyword arguments are passed through to `requests.get`.
    """
    return self.request('get', url, **kwargs)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.group">
    <p>def <span class="ident">group</span>(</p><p>self, id)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a <a href="#conjur.Group"><code>Group</code></a> object with the given id.</p>
<p>This method neither creates nor checks for the groups's existence.</p>
<p><code>id</code> is the <em>unqualified</em> id of the group, and does not include the account or kind.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.group', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.group" class="source">
    <pre><code>def group(self, id):
    """
    Return a `conjur.Group` object with the given id.
    This method neither creates nor checks for the groups's existence.
    `id` is the *unqualified* id of the group, and does not include the account or kind.
    """
    return Group(self, id)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.host">
    <p>def <span class="ident">host</span>(</p><p>self, host_id)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a <a href="#conjur.Host"><code>Host</code></a> object with the given <code>host_id</code>.</p>
<p>This method neither creates nor checks for the host's existence.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.host', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.host" class="source">
    <pre><code>def host(self, host_id):
    """
    Return a `conjur.Host` object with the given `host_id`.
    This method neither creates nor checks for the host's existence.
    """
    return Host(self, host_id)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.layer">
    <p>def <span class="ident">layer</span>(</p><p>self, layer_id)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a <a href="#conjur.Layer"><code>Layer</code></a> object with the given <code>layer_id</code>.</p>
<p>This method neither creates nor checks for the layer's existence.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.layer', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.layer" class="source">
    <pre><code>def layer(self, layer_id):
    """
    Return a `conjur.Layer` object with the given `layer_id`.
    This method neither creates nor checks for the layer's existence.
    """
    return Layer(self, layer_id)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.post">
    <p>def <span class="ident">post</span>(</p><p>self, url, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p><strong>NOTE</strong> You will generally not need to use this method directly.</p>
<p>Makes an authenticated <code>POST</code> request to the given <code>url</code></p>
<p>Returns a <a href="/requests.Response.ext"><code>requests.Response</code></a> object.</p>
<p>If the response status is not 2xx, raises a <a href="#conjur.ConjurException"><code>ConjurException</code></a>.</p>
<p><code>url</code> is the full url to request.
 Keyword arguments are passed through to <a href="/requests.post.ext"><code>requests.post</code></a>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.post', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.post" class="source">
    <pre><code>def post(self, url, **kwargs):
    """
    **NOTE** You will generally not need to use this method directly.
    Makes an authenticated `POST` request to the given `url`
    Returns a `requests.Response` object.
    If the response status is not 2xx, raises a `conjur.ConjurException`.
    `url` is the full url to request.
     Keyword arguments are passed through to `requests.post`.
    """
    return self.request('post', url, **kwargs)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.public_key">
    <p>def <span class="ident">public_key</span>(</p><p>self, username, keyname)</p>
    </div>
    

    
  
    <div class="desc"><p>Return the contents of a specific public key given by <code>keyname</code>,
for the user given by <code>username</code> as a string.</p>
<p>The name of the key is based on the name entry of the openssh formatted key that was uploaded.</p>
<p>For example, if they key contents are <code>ssh-rsa &lt;data...&gt; bob@example.com</code>,
the <code>keyname</code> should be <code>bob@example.com</code></p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.public_key', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.public_key" class="source">
    <pre><code>def public_key(self, username, keyname):
    """
    Return the contents of a specific public key given by `keyname`,
    for the user given by `username` as a string.
    The name of the key is based on the name entry of the openssh formatted key that was uploaded.
    For example, if they key contents are `ssh-rsa <data...> bob@example.com`,
    the `keyname` should be `bob@example.com`
    """
    return self.get(self._public_key_url(username, keyname)).text
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.public_key_names">
    <p>def <span class="ident">public_key_names</span>(</p><p>self, username)</p>
    </div>
    

    
  
    <div class="desc"><p>Return the names of public keys for the user given by <code>username</code>.</p>
<p>The names of the keys are based on the name entry of the openssh formatted key that was uploaded.</p>
<p>For example, if they key contents are <code>ssh-rsa &lt;data...&gt; bob@example.com</code>,
the <code>keyname</code> should be <code>bob@example.com</code></p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.public_key_names', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.public_key_names" class="source">
    <pre><code>def public_key_names(self, username):
    """
    Return the names of public keys for the user given by `username`.
    The names of the keys are based on the name entry of the openssh formatted key that was uploaded.
    For example, if they key contents are `ssh-rsa <data...> bob@example.com`,
    the `keyname` should be `bob@example.com`
    """
    return [k.split(' ')[-1] for k in self.public_keys(username).split('\n')]
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.public_keys">
    <p>def <span class="ident">public_keys</span>(</p><p>self, username)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns all keys for the user given by <code>username</code>, as a newline delimited string.</p>
<p>The odd format is chosen to support the Conjur SSH login implementation.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.public_keys', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.public_keys" class="source">
    <pre><code>def public_keys(self, username):
    """
    Returns all keys for the user given by `username`, as a newline delimited string.
    The odd format is chosen to support the Conjur SSH login implementation.
    """
    return self.get(self._public_key_url(username)).text
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.put">
    <p>def <span class="ident">put</span>(</p><p>self, url, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p><strong>NOTE</strong> You will generally not need to use this method directly.</p>
<p>Makes an authenticated <code>PUT</code> request to the given <code>url</code></p>
<p>Returns a <a href="/requests.Response.ext"><code>requests.Response</code></a> object.</p>
<p>If the response status is not 2xx, raises a <a href="#conjur.ConjurException"><code>ConjurException</code></a>.</p>
<p><code>url</code> is the full url to request.
 Keyword arguments are passed through to <a href="/requests.put.ext"><code>requests.put</code></a>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.put', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.put" class="source">
    <pre><code>def put(self,url, **kwargs):
    """
    **NOTE** You will generally not need to use this method directly.
    Makes an authenticated `PUT` request to the given `url`
    Returns a `requests.Response` object.
    If the response status is not 2xx, raises a `conjur.ConjurException`.
    `url` is the full url to request.
     Keyword arguments are passed through to `requests.put`.
    """
    return self.request('put', url, **kwargs)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.remove_public_key">
    <p>def <span class="ident">remove_public_key</span>(</p><p>self, username, keyname)</p>
    </div>
    

    
  
    <div class="desc"><p>Remove a specific public key for the user identified by <code>username</code>.
The <code>keyname</code> argument refers to the name field in the openssh formatted key
to be deleted.</p>
<p>For example, if they key contents are <code>ssh-rsa &lt;data...&gt; bob@example.com</code>,
the <code>keyname</code> should be <code>bob@example.com</code></p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.remove_public_key', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.remove_public_key" class="source">
    <pre><code>def remove_public_key(self, username, keyname):
    """
    Remove a specific public key for the user identified by `username`.
    The `keyname` argument refers to the name field in the openssh formatted key
    to be deleted.
    For example, if they key contents are `ssh-rsa <data...> bob@example.com`,
    the `keyname` should be `bob@example.com`
    """
    self.delete(self._public_key_url(username, keyname))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.remove_public_keys">
    <p>def <span class="ident">remove_public_keys</span>(</p><p>self, username)</p>
    </div>
    

    
  
    <div class="desc"><p>Remove all public keys for the user represented by <code>username</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.remove_public_keys', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.remove_public_keys" class="source">
    <pre><code>def remove_public_keys(self, username):
    """
    Remove all public keys for the user represented by `username`.
    """
    for keyname in self.public_key_names(username):
        self.remove_public_key(username, keyname)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.request">
    <p>def <span class="ident">request</span>(</p><p>self, method, url, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Make an authenticated request with the given method and url.
Additional arguments are passed to requests.<method>.</p>
<p>Returns a <a href="/requests.Response.ext"><code>requests.Response</code></a> object.</p>
<p>If the response status is not 2xx, raises a <a href="#conjur.ConjurException"><code>ConjurException</code></a>.</p>
<p><code>method</code> is of the standard HTTP verbs (case insensitive).</p>
<p><code>url</code> is the full url to request.</p>
<p>If <code>kwargs['check_errors']</code> is <code>True</code>, non-2xx responses will raise a <a href="#conjur.ConjurException"><code>ConjurException</code></a>.
Otherwise, it is the callers responsibility to check the status of the returned <a href="/requests.Response.ext"><code>requests.Response</code></a>.</p>
<p>Additional are passed through to the requests.<method> call after adding an <code>Authorization</code>
header and HTTPS verification settings.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.request', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.request" class="source">
    <pre><code>def request(self, method, url, **kwargs):
    """
    Make an authenticated request with the given method and url.
    Additional arguments are passed to requests.<method>.
    Returns a `requests.Response` object.
    If the response status is not 2xx, raises a `conjur.ConjurException`.
    `method` is of the standard HTTP verbs (case insensitive).
    `url` is the full url to request.
    If `kwargs['check_errors']` is `True`, non-2xx responses will raise a `conjur.ConjurException`.
    Otherwise, it is the callers responsibility to check the status of the returned `requests.Response`.
    Additional are passed through to the requests.<method> call after adding an `Authorization`
    header and HTTPS verification settings.
    """
    headers = kwargs.setdefault('headers', {})
    headers['Authorization'] = self.auth_header()
    return self._request(method, url, **kwargs)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.resource">
    <p>def <span class="ident">resource</span>(</p><p>self, kind, identifier)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a <a href="#conjur.Resource"><code>Resource</code></a> object with the given kind and id.</p>
<p>This method neither creates nor checks for the resource's existence.</p>
<p><code>kind</code> should be the resource kind - for example, <code>"variable"</code>, <code>"webservice"</code>,
or <code>"configuration"</code>.</p>
<p><code>identifier</code> should be the <em>unqualified</em> Conjur id.  For example, to
get the resource for a user variable named db_password, you would call
<code>api.resource('variable', 'db_password')</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.resource', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.resource" class="source">
    <pre><code>def resource(self, kind, identifier):
    """
    Return a `conjur.Resource` object with the given kind and id.
    This method neither creates nor checks for the resource's existence.
    `kind` should be the resource kind - for example, `"variable"`, `"webservice"`,
    or `"configuration"`.
    `identifier` should be the *unqualified* Conjur id.  For example, to
    get the resource for a user variable named db_password, you would call
    `api.resource('variable', 'db_password')`.
    """
    return Resource(self, kind, identifier)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.role">
    <p>def <span class="ident">role</span>(</p><p>self, kind, identifier)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a <a href="#conjur.Role"><code>Role</code></a> object with the given kind and id.</p>
<p>This method neither creates nor checks for the roles's existence.</p>
<p><code>kind</code> should be the role kind - for example, <code>"group"</code>, <code>"user"</code>,
or <code>"host"</code>.</p>
<p><code>identifier</code> should be the <em>unqualified</em> Conjur id.  For example, to
get the role for a user named bub, you would call <code>api.role('user', 'bub')</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.role', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.role" class="source">
    <pre><code>def role(self, kind, identifier):
    """
    Return a `conjur.Role` object with the given kind and id.
    This method neither creates nor checks for the roles's existence.
    `kind` should be the role kind - for example, `"group"`, `"user"`,
    or `"host"`.
    `identifier` should be the *unqualified* Conjur id.  For example, to
    get the role for a user named bub, you would call `api.role('user', 'bub')`.
    """
    return Role(self, kind, identifier)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.user">
    <p>def <span class="ident">user</span>(</p><p>self, login)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns an object representing a Conjur user with the given login.</p>
<p>The user is <em>not</em> created by this method, and may in fact not exist.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.user', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.user" class="source">
    <pre><code>def user(self, login):
    """
    Returns an object representing a Conjur user with the given login.
    The user is *not* created by this method, and may in fact not exist.
    """
    return User(self, login)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.API.variable">
    <p>def <span class="ident">variable</span>(</p><p>self, id)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a <a href="#conjur.Variable"><code>Variable</code></a> object with the given <code>id</code>.</p>
<p>This method neither creates nor checks for the variable's existence.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.API.variable', this);">Show source &equiv;</a></p>
  <div id="source-conjur.API.variable" class="source">
    <pre><code>def variable(self, id):
    """
    Return a `conjur.Variable` object with the given `id`.
    This method neither creates nor checks for the variable's existence.
    """
    return Variable(self, id)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="conjur.Config" class="name">class <span class="ident">Config</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Config', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Config" class="source">
    <pre><code>class Config(object):
    def __init__(self, **kwargs):
        self._config = {}
        self.update(kwargs)

    def load(self, input):
        import yaml

        if isinstance(input, str):
            input = open(input, 'r')
        conf = yaml.safe_load(input)
        self.update(conf)

    def update(self, *dicts, **kwargs):
        for d in dicts + (kwargs, ):
            self._config.update(d)

    def service_url(self, service, per_account=True):
        key = '%s_url' % service
        if key in self._config:
            return self._config[key]
        if self.appliance_url is not None:
            url_parts = [self.appliance_url]
            if service != "core":
                url_parts.append(service)
            return "/".join(url_parts)
        else:
            raise ConfigException('Missing appliance_url')

    def get(self, key, default=_DEFAULT):
        if key in self._config:
            return self._config[key]
        env_key = 'CONJUR_' + key.upper()
        if env_key in os.environ:
            value = os.environ[env_key]
            self._config[key] = value
            return value
        if default is _DEFAULT:
            raise Exception("config setting %s is required" % key)
        return default

    def set(self, key, value):
        self._config[key] = value

    authn_url = _service_url('authn', doc='URL for the authn service')
    core_url = _service_url('core', doc='URL for the core service')
    authz_url = _service_url('authz',
                             per_account=False,
                             doc='URL for the authz service')

    pubkeys_url = _service_url('pubkeys', doc='URL for the pubkeys service')


    cert_file = _setting('cert_file', None,
                         "Path to certificate to verify ssl requests \
                         to appliance")

    account = _setting('account', 'conjur', 'Conjur account identifier')

    appliance_url = _setting('appliance_url', None, 'URL for Conjur appliance')

    @property
    def verify(self):
        '''
        Argument to be passed to `requests` methods `verify` keyword argument.
        '''
        if self.cert_file is not None:
            return self.cert_file
        else:
            return True
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#conjur.Config">Config</a></li>
          <li><a href="/__builtin__.object.ext">__builtin__.object</a></li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="conjur.Config.account" class="name">var <span class="ident">account</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Config.appliance_url" class="name">var <span class="ident">appliance_url</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Config.authn_url" class="name">var <span class="ident">authn_url</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Config.authz_url" class="name">var <span class="ident">authz_url</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Config.cert_file" class="name">var <span class="ident">cert_file</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Config.core_url" class="name">var <span class="ident">core_url</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Config.pubkeys_url" class="name">var <span class="ident">pubkeys_url</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="conjur.Config.account" class="name">var <span class="ident">account</span></p>
            

            
  
    <div class="desc"><p>Conjur account identifier</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Config.appliance_url" class="name">var <span class="ident">appliance_url</span></p>
            

            
  
    <div class="desc"><p>URL for Conjur appliance</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Config.authn_url" class="name">var <span class="ident">authn_url</span></p>
            

            
  
    <div class="desc"><p>URL for the authn service</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Config.authz_url" class="name">var <span class="ident">authz_url</span></p>
            

            
  
    <div class="desc"><p>URL for the authz service</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Config.cert_file" class="name">var <span class="ident">cert_file</span></p>
            

            
  
    <div class="desc"><p>Path to certificate to verify ssl requests                          to appliance</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Config.core_url" class="name">var <span class="ident">core_url</span></p>
            

            
  
    <div class="desc"><p>URL for the core service</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Config.pubkeys_url" class="name">var <span class="ident">pubkeys_url</span></p>
            

            
  
    <div class="desc"><p>URL for the pubkeys service</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Config.verify" class="name">var <span class="ident">verify</span></p>
            

            
  
    <div class="desc"><p>Argument to be passed to <code>requests</code> methods <code>verify</code> keyword argument.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="conjur.Config.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Config.__init__', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Config.__init__" class="source">
    <pre><code>def __init__(self, **kwargs):
    self._config = {}
    self.update(kwargs)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Config.get">
    <p>def <span class="ident">get</span>(</p><p>self, key, default=&lt;object object at 0x7f0efc22c0e0&gt;)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Config.get', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Config.get" class="source">
    <pre><code>def get(self, key, default=_DEFAULT):
    if key in self._config:
        return self._config[key]
    env_key = 'CONJUR_' + key.upper()
    if env_key in os.environ:
        value = os.environ[env_key]
        self._config[key] = value
        return value
    if default is _DEFAULT:
        raise Exception("config setting %s is required" % key)
    return default
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Config.load">
    <p>def <span class="ident">load</span>(</p><p>self, input)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Config.load', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Config.load" class="source">
    <pre><code>def load(self, input):
    import yaml
    if isinstance(input, str):
        input = open(input, 'r')
    conf = yaml.safe_load(input)
    self.update(conf)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Config.service_url">
    <p>def <span class="ident">service_url</span>(</p><p>self, service, per_account=True)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Config.service_url', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Config.service_url" class="source">
    <pre><code>def service_url(self, service, per_account=True):
    key = '%s_url' % service
    if key in self._config:
        return self._config[key]
    if self.appliance_url is not None:
        url_parts = [self.appliance_url]
        if service != "core":
            url_parts.append(service)
        return "/".join(url_parts)
    else:
        raise ConfigException('Missing appliance_url')
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Config.set">
    <p>def <span class="ident">set</span>(</p><p>self, key, value)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Config.set', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Config.set" class="source">
    <pre><code>def set(self, key, value):
    self._config[key] = value
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Config.update">
    <p>def <span class="ident">update</span>(</p><p>self, *dicts, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Config.update', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Config.update" class="source">
    <pre><code>def update(self, *dicts, **kwargs):
    for d in dicts + (kwargs, ):
        self._config.update(d)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="conjur.ConjurException" class="name">class <span class="ident">ConjurException</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.ConjurException', this);">Show source &equiv;</a></p>
  <div id="source-conjur.ConjurException" class="source">
    <pre><code>class ConjurException(Exception):
    pass
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#conjur.ConjurException">ConjurException</a></li>
          <li><a href="/exceptions.Exception.ext">exceptions.Exception</a></li>
          <li><a href="/exceptions.BaseException.ext">exceptions.BaseException</a></li>
          <li><a href="/__builtin__.object.ext">__builtin__.object</a></li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="conjur.ConjurException.args" class="name">var <span class="ident">args</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.ConjurException.message" class="name">var <span class="ident">message</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="conjur.Group" class="name">class <span class="ident">Group</span></p>
      
  
    <div class="desc"><p>Represents a Conjur <a href="https://developer.conjur.net/reference/services/directory/group">group</a>.</p>
<p>Generally you won't create instances of this class.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Group', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Group" class="source">
    <pre><code>class Group(object):
    """
    Represents a Conjur [group](https://developer.conjur.net/reference/services/directory/group).

    Generally you won't create instances of this class.
    """
    def __init__(self, api, id):
        self.api = api
        self.id = id
        self.role = api.role('group', id)

    def members(self):
        return self.role.members()

    def add_member(self, member, admin=False):
        self.role.grant_to(member, admin)

    def remove_member(self, member):
        self.role.revoke_from(member)
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#conjur.Group">Group</a></li>
          <li><a href="/__builtin__.object.ext">__builtin__.object</a></li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="conjur.Group.api" class="name">var <span class="ident">api</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Group.id" class="name">var <span class="ident">id</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Group.role" class="name">var <span class="ident">role</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="conjur.Group.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, api, id)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Group.__init__', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Group.__init__" class="source">
    <pre><code>def __init__(self, api, id):
    self.api = api
    self.id = id
    self.role = api.role('group', id)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Group.add_member">
    <p>def <span class="ident">add_member</span>(</p><p>self, member, admin=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Group.add_member', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Group.add_member" class="source">
    <pre><code>def add_member(self, member, admin=False):
    self.role.grant_to(member, admin)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Group.members">
    <p>def <span class="ident">members</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Group.members', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Group.members" class="source">
    <pre><code>def members(self):
    return self.role.members()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Group.remove_member">
    <p>def <span class="ident">remove_member</span>(</p><p>self, member)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Group.remove_member', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Group.remove_member" class="source">
    <pre><code>def remove_member(self, member):
    self.role.revoke_from(member)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="conjur.Host" class="name">class <span class="ident">Host</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Host', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Host" class="source">
    <pre><code>class Host(object):
    def __init__(self, api, id, attrs=None):
        self.api = api
        self.id = id
        self._attrs = attrs
        self.role = self.api.role('host', self.id)

    def exists(self):
        status = self.api.get(self._url(), check_errors=False).status_code
        if status == 200:
            return True
        if status == 404:
            return False
        raise ConjurException("Request Failed: {0}".format(status))

    def _fetch(self):
        self._attrs = self.api.get(self._url()).json()

    def _url(self):
        return "{0}/hosts/{1}".format(self.api.config.core_url,
                                      urlescape(self.id))

    def __getattr__(self, item):
        if self._attrs is None:
            self._fetch()
        try:
            return self._attrs[item]
        except KeyError:
            raise AttributeError(item)
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#conjur.Host">Host</a></li>
          <li><a href="/__builtin__.object.ext">__builtin__.object</a></li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="conjur.Host.api" class="name">var <span class="ident">api</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Host.id" class="name">var <span class="ident">id</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Host.role" class="name">var <span class="ident">role</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="conjur.Host.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, api, id, attrs=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Host.__init__', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Host.__init__" class="source">
    <pre><code>def __init__(self, api, id, attrs=None):
    self.api = api
    self.id = id
    self._attrs = attrs
    self.role = self.api.role('host', self.id)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Host.exists">
    <p>def <span class="ident">exists</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Host.exists', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Host.exists" class="source">
    <pre><code>def exists(self):
    status = self.api.get(self._url(), check_errors=False).status_code
    if status == 200:
        return True
    if status == 404:
        return False
    raise ConjurException("Request Failed: {0}".format(status))
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="conjur.Layer" class="name">class <span class="ident">Layer</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Layer', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Layer" class="source">
    <pre><code>class Layer(object):
    def __init__(self, api, id, attrs=None):
        self.api = api
        self.id = id
        self._attrs = {} if attrs is None else attrs

    def add_host(self, host):
        hostid = authzid(host, 'role', with_account=False)
        self.api.post(self._hosts_url(), data={'hostid': hostid})

    def remove_host(self, host):
        hostid = authzid(host, 'role')
        self.api.delete(self._host_url(hostid))

    def exists(self):
        resp = self.api.get(self._url(), check_errors=False)
        if resp.status_code == 200:
            return True
        if resp.status_code == 404:
            return False
        raise ConjurException("Request Failed: {0}".format(resp.status_code))

    def _url(self):
        return "{0}/layers/{1}".format(self.api.config.core_url,
                                       urlescape(self.id))

    def _hosts_url(self):
        return "{0}/hosts".format(self._url())

    def _host_url(self, host_id):
        return "{0}/{1}".format(self._hosts_url(), urlescape(host_id))

    def _fetch(self):
        self._attrs = self.api.get(self._url()).json()

    def __getattr__(self, item):
        if self._attrs is None:
            self._fetch()
        try:
            return self._attrs[item]
        except KeyError:
            raise AttributeError(item)
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#conjur.Layer">Layer</a></li>
          <li><a href="/__builtin__.object.ext">__builtin__.object</a></li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="conjur.Layer.api" class="name">var <span class="ident">api</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Layer.id" class="name">var <span class="ident">id</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="conjur.Layer.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, api, id, attrs=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Layer.__init__', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Layer.__init__" class="source">
    <pre><code>def __init__(self, api, id, attrs=None):
    self.api = api
    self.id = id
    self._attrs = {} if attrs is None else attrs
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Layer.add_host">
    <p>def <span class="ident">add_host</span>(</p><p>self, host)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Layer.add_host', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Layer.add_host" class="source">
    <pre><code>def add_host(self, host):
    hostid = authzid(host, 'role', with_account=False)
    self.api.post(self._hosts_url(), data={'hostid': hostid})
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Layer.exists">
    <p>def <span class="ident">exists</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Layer.exists', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Layer.exists" class="source">
    <pre><code>def exists(self):
    resp = self.api.get(self._url(), check_errors=False)
    if resp.status_code == 200:
        return True
    if resp.status_code == 404:
        return False
    raise ConjurException("Request Failed: {0}".format(resp.status_code))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Layer.remove_host">
    <p>def <span class="ident">remove_host</span>(</p><p>self, host)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Layer.remove_host', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Layer.remove_host" class="source">
    <pre><code>def remove_host(self, host):
    hostid = authzid(host, 'role')
    self.api.delete(self._host_url(hostid))
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="conjur.Resource" class="name">class <span class="ident">Resource</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Resource', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Resource" class="source">
    <pre><code>class Resource(object):
    def __init__(self, api, kind, identifier):
        self.api = api
        self.kind = kind
        self.identifier = identifier

    @property
    def resourceid(self):
        return ":".join([self.api.config.account, self.kind, self.identifier])

    def permit(self, role, privilege, grant_option=False):
        '''
        Permit `role` to perform `privilege` on this resource.  If
        `grant_option` is True, the role will be able to grant this
        permission to other resources.

        You must own the resource or have the permission with `grant_option`
        to call this method.
        '''
        data = {}
        params = {
            'permit': 'true',
            'privilege': privilege,
            'role': authzid(role, 'role')
        }
        if grant_option:
            data['grant_option'] = 'true'

        self.api.post(self.url(), data=data, params=params)

    def deny(self, role, privilege):
        '''
        Deny `role` permission to perform `privilege` on this resource.

        You must own the resource or have the permission with `grant_option`
        on it to call this method.
        '''
        params = {
            'permit': 'true',
            'privilege': privilege,
            'role': authzid(role)
        }

        self.api.post(self.url(), parmas=params)

    def permitted(self, privilege, role=None):
        '''
        Return True if +role+ has +privilege+ on this resource.

        +role+ may be a Role instance, an object with a +role+ method,
        or a role id as a string.

        If +role+ is not given, check the permission for the currently
        authenticated role.
        '''

        if role is None:
            # Handle self role check
            response = self.api.get(self.url(),
                                    params={'check': 'true',
                                            'privilege': privilege},
                                    check_errors=False)
            if response.status_code == 204:
                return True
            elif response.status_code in (404, 403):
                return False
            else:
                raise ConjurException("Request failed: %d" % response.status_code)
        else:
            # Otherwise call role.is_permitted
            return Role.from_roleid(self.api, role).is_permitted(self, privilege)

    def url(self):
        return "/".join([
            self.api.config.authz_url,
            self.api.config.account,
            'resources',
            self.kind,
            self.identifier
        ])
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#conjur.Resource">Resource</a></li>
          <li><a href="/__builtin__.object.ext">__builtin__.object</a></li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="conjur.Resource.api" class="name">var <span class="ident">api</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Resource.identifier" class="name">var <span class="ident">identifier</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Resource.kind" class="name">var <span class="ident">kind</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Resource.resourceid" class="name">var <span class="ident">resourceid</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="conjur.Resource.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, api, kind, identifier)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Resource.__init__', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Resource.__init__" class="source">
    <pre><code>def __init__(self, api, kind, identifier):
    self.api = api
    self.kind = kind
    self.identifier = identifier
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Resource.deny">
    <p>def <span class="ident">deny</span>(</p><p>self, role, privilege)</p>
    </div>
    

    
  
    <div class="desc"><p>Deny <code>role</code> permission to perform <code>privilege</code> on this resource.</p>
<p>You must own the resource or have the permission with <code>grant_option</code>
on it to call this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Resource.deny', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Resource.deny" class="source">
    <pre><code>def deny(self, role, privilege):
    '''
    Deny `role` permission to perform `privilege` on this resource.
    You must own the resource or have the permission with `grant_option`
    on it to call this method.
    '''
    params = {
        'permit': 'true',
        'privilege': privilege,
        'role': authzid(role)
    }
    self.api.post(self.url(), parmas=params)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Resource.permit">
    <p>def <span class="ident">permit</span>(</p><p>self, role, privilege, grant_option=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Permit <code>role</code> to perform <code>privilege</code> on this resource.  If
<code>grant_option</code> is True, the role will be able to grant this
permission to other resources.</p>
<p>You must own the resource or have the permission with <code>grant_option</code>
to call this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Resource.permit', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Resource.permit" class="source">
    <pre><code>def permit(self, role, privilege, grant_option=False):
    '''
    Permit `role` to perform `privilege` on this resource.  If
    `grant_option` is True, the role will be able to grant this
    permission to other resources.
    You must own the resource or have the permission with `grant_option`
    to call this method.
    '''
    data = {}
    params = {
        'permit': 'true',
        'privilege': privilege,
        'role': authzid(role, 'role')
    }
    if grant_option:
        data['grant_option'] = 'true'
    self.api.post(self.url(), data=data, params=params)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Resource.permitted">
    <p>def <span class="ident">permitted</span>(</p><p>self, privilege, role=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Return True if +role+ has +privilege+ on this resource.</p>
<p>+role+ may be a Role instance, an object with a +role+ method,
or a role id as a string.</p>
<p>If +role+ is not given, check the permission for the currently
authenticated role.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Resource.permitted', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Resource.permitted" class="source">
    <pre><code>def permitted(self, privilege, role=None):
    '''
    Return True if +role+ has +privilege+ on this resource.
    +role+ may be a Role instance, an object with a +role+ method,
    or a role id as a string.
    If +role+ is not given, check the permission for the currently
    authenticated role.
    '''
    if role is None:
        # Handle self role check
        response = self.api.get(self.url(),
                                params={'check': 'true',
                                        'privilege': privilege},
                                check_errors=False)
        if response.status_code == 204:
            return True
        elif response.status_code in (404, 403):
            return False
        else:
            raise ConjurException("Request failed: %d" % response.status_code)
    else:
        # Otherwise call role.is_permitted
        return Role.from_roleid(self.api, role).is_permitted(self, privilege)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Resource.url">
    <p>def <span class="ident">url</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Resource.url', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Resource.url" class="source">
    <pre><code>def url(self):
    return "/".join([
        self.api.config.authz_url,
        self.api.config.account,
        'resources',
        self.kind,
        self.identifier
    ])
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="conjur.Role" class="name">class <span class="ident">Role</span></p>
      
  
    <div class="desc"><p>Represents a Conjur <a href="https://developer.conjur.net/key_concepts/rbac.html#rbac-roles">role</a>.</p>
<p>An instance of this class does not know whether the role in question exists.</p>
<p>Generally you should create instances of this class through the <a href="#conjur.API.role"><code>role</code></a> method,
or the <a href="/Role.from_roleid.ext"><code>Role.from_roleid</code></a> classmethod.</p>
<p>Roles can provide information about their members and can check whether the role they represent
is allowed to perform certain operations on resources.</p>
<p><a href="#conjur.User"><code>User</code></a> and <a href="#conjur.Group"><code>Group</code></a> objects have <code>role</code> members that reference the role corresponding
to that Conjur asset.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Role', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Role" class="source">
    <pre><code>class Role(object):
    """
    Represents a Conjur [role](https://developer.conjur.net/key_concepts/rbac.html#rbac-roles).

    An instance of this class does not know whether the role in question exists.

    Generally you should create instances of this class through the `conjur.API.role` method,
    or the `Role.from_roleid` classmethod.

    Roles can provide information about their members and can check whether the role they represent
    is allowed to perform certain operations on resources.

    `conjur.User` and `conjur.Group` objects have `role` members that reference the role corresponding
    to that Conjur asset.
    """
    def __init__(self, api, kind, identifier):
        """
        Create a role to represent the Conjur role with id `<kind>:<identifier>`.  For
        example, to represent the role associated with a user named bob,

            role = Role(api, 'user', 'bob')

        `api` must be a `conjur.API` instance, used to implement this classes interactions with Conjur

        `kind` is a string giving the role kind

        `identifier` is the unqualified identifier of the role.
        """

        self.api = api
        """
        The `conjur.API` instance used to implement our methods.
        """

        self.kind = kind
        """
        The `kind` portion of the role's id.
        """

        self.identifier = identifier
        """
        The `identifier` portion of the role's id.
        """

    @classmethod
    def from_roleid(cls, api, roleid):
        """
        Creates an instance of `conjur.Role` from a full role id string.

        `api` is an instance of `conjur.API`

        `roleid` is a fully or partially qualified Conjur identifier, for example,
        `"the-account:service:some-service"` or `"service:some-service"` resolve to the same role.
        """
        tokens = authzid(roleid, 'role').split(':', 3)
        if len(tokens) == 3:
            tokens.pop(0)
        return cls(api, *tokens)

    @property
    def roleid(self):
        """
        Return the full role id as a string.

        Example:

            >>> role = api.role('user', 'bob')
            >>> role.roleid
            'the-account:user:bob'

         """
        return ':'.join([self.api.config.account, self.kind, self.identifier])

    def is_permitted(self, resource, privilege):
        params = {
            'check': 'true',
            'resource_id': authzid(resource, 'resource'),
            'privilege': privilege
        }
        response = self.api.get(self._url(), params=params,
                                check_errors=False)
        if response.status_code == 204:
            return True
        elif response.status_code in (403, 404):
            return False
        else:
            raise ConjurException("Request failed: %d" % response.status_code)

    def grant_to(self, member, admin=None):
        data = {}
        if admin is not None:
            data['admin'] = 'true' if admin else 'false'
        logging.info("Adding member with {} and data of {}".format(
            self._membership_url(member), repr(data)))
        self.api.put(self._membership_url(member), data=data)

    def revoke_from(self, member):
        self.api.delete(self._membership_url(member))

    def members(self):
        logging.info('Getting members from {}'.format(self._membership_url()))
        return self.api.get(self._membership_url()).json()

    def _membership_url(self, member=None):
        url = self._url() + "?members"
        if member is not None:
            memberid = authzid(member, 'role')
            url += "&member=" + urlescape(memberid)
        return url

    def _url(self, *args):
        return "/".join([self.api.config.authz_url,
                         self.api.config.account,
                         'roles',
                         self.kind,
                         self.identifier] + list(args))
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#conjur.Role">Role</a></li>
          <li><a href="/__builtin__.object.ext">__builtin__.object</a></li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="conjur.Role.api" class="name">var <span class="ident">api</span></p>
            

            
  
    <div class="desc"><p>The <a href="#conjur.API"><code>API</code></a> instance used to implement our methods.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Role.identifier" class="name">var <span class="ident">identifier</span></p>
            

            
  
    <div class="desc"><p>The <code>identifier</code> portion of the role's id.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Role.kind" class="name">var <span class="ident">kind</span></p>
            

            
  
    <div class="desc"><p>The <code>kind</code> portion of the role's id.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Role.roleid" class="name">var <span class="ident">roleid</span></p>
            

            
  
    <div class="desc"><p>Return the full role id as a string.</p>
<p>Example:</p>
<pre><code>&gt;&gt;&gt; role = api.role('user', 'bob')
&gt;&gt;&gt; role.roleid
'the-account:user:bob'
</code></pre></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="conjur.Role.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, api, kind, identifier)</p>
    </div>
    

    
  
    <div class="desc"><p>Create a role to represent the Conjur role with id <code>&lt;kind&gt;:&lt;identifier&gt;</code>.  For
example, to represent the role associated with a user named bob,</p>
<pre><code>role = Role(api, 'user', 'bob')
</code></pre>
<p><code>api</code> must be a <a href="#conjur.API"><code>API</code></a> instance, used to implement this classes interactions with Conjur</p>
<p><code>kind</code> is a string giving the role kind</p>
<p><code>identifier</code> is the unqualified identifier of the role.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Role.__init__', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Role.__init__" class="source">
    <pre><code>def __init__(self, api, kind, identifier):
    """
    Create a role to represent the Conjur role with id `<kind>:<identifier>`.  For
    example, to represent the role associated with a user named bob,
        role = Role(api, 'user', 'bob')
    `api` must be a `conjur.API` instance, used to implement this classes interactions with Conjur
    `kind` is a string giving the role kind
    `identifier` is the unqualified identifier of the role.
    """
    self.api = api
    """
    The `conjur.API` instance used to implement our methods.
    """
    self.kind = kind
    """
    The `kind` portion of the role's id.
    """
    self.identifier = identifier
    """
    The `identifier` portion of the role's id.
    """
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Role.from_roleid">
    <p>def <span class="ident">from_roleid</span>(</p><p>cls, api, roleid)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates an instance of <a href="#conjur.Role"><code>Role</code></a> from a full role id string.</p>
<p><code>api</code> is an instance of <a href="#conjur.API"><code>API</code></a></p>
<p><code>roleid</code> is a fully or partially qualified Conjur identifier, for example,
<code>"the-account:service:some-service"</code> or <code>"service:some-service"</code> resolve to the same role.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Role.from_roleid', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Role.from_roleid" class="source">
    <pre><code>@classmethod
def from_roleid(cls, api, roleid):
    """
    Creates an instance of `conjur.Role` from a full role id string.
    `api` is an instance of `conjur.API`
    `roleid` is a fully or partially qualified Conjur identifier, for example,
    `"the-account:service:some-service"` or `"service:some-service"` resolve to the same role.
    """
    tokens = authzid(roleid, 'role').split(':', 3)
    if len(tokens) == 3:
        tokens.pop(0)
    return cls(api, *tokens)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Role.grant_to">
    <p>def <span class="ident">grant_to</span>(</p><p>self, member, admin=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Role.grant_to', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Role.grant_to" class="source">
    <pre><code>def grant_to(self, member, admin=None):
    data = {}
    if admin is not None:
        data['admin'] = 'true' if admin else 'false'
    logging.info("Adding member with {} and data of {}".format(
        self._membership_url(member), repr(data)))
    self.api.put(self._membership_url(member), data=data)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Role.is_permitted">
    <p>def <span class="ident">is_permitted</span>(</p><p>self, resource, privilege)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Role.is_permitted', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Role.is_permitted" class="source">
    <pre><code>def is_permitted(self, resource, privilege):
    params = {
        'check': 'true',
        'resource_id': authzid(resource, 'resource'),
        'privilege': privilege
    }
    response = self.api.get(self._url(), params=params,
                            check_errors=False)
    if response.status_code == 204:
        return True
    elif response.status_code in (403, 404):
        return False
    else:
        raise ConjurException("Request failed: %d" % response.status_code)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Role.members">
    <p>def <span class="ident">members</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Role.members', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Role.members" class="source">
    <pre><code>def members(self):
    logging.info('Getting members from {}'.format(self._membership_url()))
    return self.api.get(self._membership_url()).json()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Role.revoke_from">
    <p>def <span class="ident">revoke_from</span>(</p><p>self, member)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Role.revoke_from', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Role.revoke_from" class="source">
    <pre><code>def revoke_from(self, member):
    self.api.delete(self._membership_url(member))
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="conjur.User" class="name">class <span class="ident">User</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.User', this);">Show source &equiv;</a></p>
  <div id="source-conjur.User" class="source">
    <pre><code>class User(object):
    def __init__(self, api, login, attrs=None):
        self.api = api
        self.login = login
        # support as_role
        self.role = api.role('user', login)
        self._attrs = attrs

    def exists(self):
        resp = self.api.get(self.url(), check_errors=False)
        return resp.status_code != 404

    def __getattr__(self, item):
        if self._attrs is None:
            self._fetch()
        try:
            return self._attrs[item]
        except KeyError:
            raise AttributeError(item)

    def _fetch(self):
        self._attrs = self.api.get(self.url()).json()

    def url(self):
        return "{0}/users/{1}".format(self.api.config.core_url,
                                      urlescape(self.login))
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#conjur.User">User</a></li>
          <li><a href="/__builtin__.object.ext">__builtin__.object</a></li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="conjur.User.api" class="name">var <span class="ident">api</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.User.login" class="name">var <span class="ident">login</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.User.role" class="name">var <span class="ident">role</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="conjur.User.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, api, login, attrs=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.User.__init__', this);">Show source &equiv;</a></p>
  <div id="source-conjur.User.__init__" class="source">
    <pre><code>def __init__(self, api, login, attrs=None):
    self.api = api
    self.login = login
    # support as_role
    self.role = api.role('user', login)
    self._attrs = attrs
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.User.exists">
    <p>def <span class="ident">exists</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.User.exists', this);">Show source &equiv;</a></p>
  <div id="source-conjur.User.exists" class="source">
    <pre><code>def exists(self):
    resp = self.api.get(self.url(), check_errors=False)
    return resp.status_code != 404
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.User.url">
    <p>def <span class="ident">url</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.User.url', this);">Show source &equiv;</a></p>
  <div id="source-conjur.User.url" class="source">
    <pre><code>def url(self):
    return "{0}/users/{1}".format(self.api.config.core_url,
                                  urlescape(self.login))
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="conjur.Variable" class="name">class <span class="ident">Variable</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Variable', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Variable" class="source">
    <pre><code>class Variable(object):
    def __init__(self, api, id, attrs=None):
        self.id = id
        self.api = api
        self._attrs = attrs

    def value(self, version=None):
        url = "%s/variables/%s/value" % (self.api.config.core_url,
                                         urlescape(self.id))
        if version is not None:
            url = "%s?version=%s" % (url, version)
        return self.api.get(url).text

    def add_value(self, value):
        # Invalidate _attrs since our version count is going to change
        self._attrs = None
        data = {'value': value}
        url = "%s/variables/%s/values" % (self.api.config.core_url,
                                          urlescape(self.id))
        self.api.post(url, data=data)

    def __getattr__(self, item):
        if self._attrs is None:
            self._fetch()
        try:
            return self._attrs[item]
        except KeyError:
            raise AttributeError(item)

    def _fetch(self):
        self._attrs = self.api.get(
            "{0}/variables/{1}".format(self.api.config.core_url,
                                       urlescape(self.id))
        ).json()
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#conjur.Variable">Variable</a></li>
          <li><a href="/__builtin__.object.ext">__builtin__.object</a></li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="conjur.Variable.api" class="name">var <span class="ident">api</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="conjur.Variable.id" class="name">var <span class="ident">id</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="conjur.Variable.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, api, id, attrs=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Variable.__init__', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Variable.__init__" class="source">
    <pre><code>def __init__(self, api, id, attrs=None):
    self.id = id
    self.api = api
    self._attrs = attrs
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Variable.add_value">
    <p>def <span class="ident">add_value</span>(</p><p>self, value)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Variable.add_value', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Variable.add_value" class="source">
    <pre><code>def add_value(self, value):
    # Invalidate _attrs since our version count is going to change
    self._attrs = None
    data = {'value': value}
    url = "%s/variables/%s/values" % (self.api.config.core_url,
                                      urlescape(self.id))
    self.api.post(url, data=data)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="conjur.Variable.value">
    <p>def <span class="ident">value</span>(</p><p>self, version=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-conjur.Variable.value', this);">Show source &equiv;</a></p>
  <div id="source-conjur.Variable.value" class="source">
    <pre><code>def value(self, version=None):
    url = "%s/variables/%s/value" % (self.api.config.core_url,
                                     urlescape(self.id))
    if version is not None:
        url = "%s?version=%s" % (url, version)
    return self.api.get(url).text
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
